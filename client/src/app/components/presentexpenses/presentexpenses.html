<div id="newExpForm">
  <div class="form-header">
    <i class="bi bi-receipt-cutoff"></i>
    <h3>Enter Expense Information</h3>
    <p>Fill in the details below to submit your expense report</p>
  </div>

  <div class="form-body">
    <!-- Expense Amount -->
    <div class="form-floating mb-3">
      <input
        type="number"
        class="form-control"
        id="expenseAmountInput"
        step=".01"
        placeholder=" "
        [(ngModel)]="newExpenses.expenseAmount"
      />
      <label for="expenseAmountInput"><i class="bi bi-currency-dollar me-2"></i>Expense Amount</label>
    </div>

    <!-- Expense Type -->
    <div class="form-floating mb-3">
      <input
        type="text"
        class="form-control"
        id="expenseTypeInput"
        [(ngModel)]="newExpenses.expenseType"
        placeholder=" "
      />
      <label for="expenseTypeInput"><i class="bi bi-tag me-2"></i>Expense Type</label>
    </div>

    <!-- Expense Description -->
    <div class="form-floating mb-3">
      <input
        type="text"
        class="form-control"
        id="expenseDescriptionInput"
        [(ngModel)]="newExpenses.expenseDescription"
        placeholder=" "
      />
      <label for="expenseDescriptionInput"><i class="bi bi-file-text me-2"></i>Expense Description</label>
    </div>

    <!-- Expense Date -->
    <div class="mb-3">
      <label class="form-label" for="expenseDateInput">
        <i class="bi bi-calendar-event me-2"></i>Expense Date
      </label>
      <input
        type="date"
        class="form-control"
        id="expenseDateInput"
        [(ngModel)]="newExpenses.expenseDate"
      />
    </div>

    <!-- Receipt Upload -->
    <div class="mb-4">
      <label class="form-label" for="receiptFileInput">
        <i class="bi bi-cloud-upload me-2"></i>Upload Receipt
      </label>
      <div class="file-upload-wrapper">
        <input
          type="file"
          class="form-control"
          id="receiptFileInput"
          accept=".png,.jpeg,.jpg,.pdf"
          (change)="onFileSelected($event)"
        />
        <div class="file-upload-info">
          <i class="bi bi-paperclip me-2"></i>
          <span>Supports: PNG, JPEG, JPG, PDF</span>
        </div>
      </div>
      
      <div class="upload-status mt-2" *ngIf="isProcessingReceipt">
        <div class="processing-indicator">
          <span class="spinner-border spinner-border-sm me-2"></span>
          <span>Processing receipt with OCR...</span>
        </div>
      </div>
      
      <div class="upload-status mt-2" *ngIf="!isProcessingReceipt && newExpenses.expenseReceipt">
        <div class="success-indicator">
          <i class="bi bi-check-circle-fill me-2"></i>
          <span>{{ newExpenses.expenseReceipt.name }}</span>
          <button type="button" class="btn-clear-receipt" (click)="clearReceipt()" title="Clear receipt and form data">
            <i class="bi bi-trash3-fill me-1"></i>
            Clear All
          </button>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-save" (click)="saveExpense()">
        <i class="bi bi-save-fill me-2"></i>
        Save
      </button>
      <button type="button" class="btn-submit" (click)="submitExpense()" [disabled]="!savedExpenseId">
        <i class="bi bi-send-fill me-2"></i>
        Submit
      </button>
    </div>
  </div>
</div>

<div class="toast-container position-fixed top-0 end-0 p-3">
  <!-- ✅ Success Toast -->
  <div
    class="toast align-items-center text-bg-success border-0"
    role="alert"
    aria-live="assertive"
    aria-atomic="true"
    #successToast
  >
    <div class="d-flex">
      <div class="toast-body">
        {{ successMessage }}
      </div>
      <button
        type="button"
        class="btn-close btn-close-white me-2 m-auto"
        data-bs-dismiss="toast"
        aria-label="Close"
      ></button>
    </div>
  </div>

  <!-- ❌ Failure Toast -->
  <div
    class="toast align-items-center text-bg-danger border-0"
    role="alert"
    aria-live="assertive"
    aria-atomic="true"
    #errorToast
  >
    <div class="d-flex">
      <div class="toast-body">
        {{ errorMessage }}
      </div>
      <button
        type="button"
        class="btn-close btn-close-white me-2 m-auto"
        data-bs-dismiss="toast"
        aria-label="Close"
      ></button>
    </div>
  </div>
</div>
